---
title: Chapter 2. Metaprogramming 
layout: home
has_children: true
has_toc: true
nav_order: 27
---

**Metaprogramming (see Chapter** **XI. ,
page** **101)**

These blocks support *metaprogramming,* which means manipulating blocks
and scripts as data. This is not the same as manipulating procedures
(see Chapter VI. ), which are what the blocks *mean;* in metaprogramming
the actual blocks, what you see on the screen, are the data. This
capability is new in version 8.0.

**First class list blocks (see Chapter IV, page** **46):**

<img src="/snap-manual/assets/images/image190.png" style="width:731px; height:210px">


**\
**<img src="/snap-manual/assets/images/image224.png" style="width:80px; height:20px">
 <img src="/snap-manual/assets/images/image225.png" style="width:137px; height:20px">
 **report the sprite or mouse position as a two-item
vector (x,y).**

<img src="/snap-manual/assets/images/image226.png" style="width:575px; height:31px">
**First class procedure blocks (see Chapter VI, page**
**65):**

<img src="/snap-manual/assets/images/image240.png" style="width:512px; height:33px">
<img src="/snap-manual/assets/images/image246.png" style="width:419px; height:31px">
**First class continuation blocks (see Chapter X,
page** **93):**

**First class sprite, costume, and sound blocks (see Chapter VII, page**
**73):**

<img src="/snap-manual/assets/images/image250.png" style="width:565px; height:206px">


**Scenes:**

<img src="/snap-manual/assets/images/image280.png" style="width:228px; height:127px">
The major new feature of version 7.0 is *scenes:* A
project can include within it sub-projects, called scenes, each with its
own stage, sprites, scripts, and so on. This block makes another scene
active, replacing the current one.

Nothing is automatically shared between scenes: no sprites, no blocks,
no variables. But the old scene can send a message to the new one, to
start it running, with optional payload as in broadcast (page 23).

<img src="/snap-manual/assets/images/image281.png" style="width:244px; height:30px">
<img src="/snap-manual/assets/images/image282.png" style="width:300px; height:50px">
**In particular, you can say**

> **if the new scene expects to be started with a green flag signal.**

**\
These aren't new blocks but they have a new feature:**

These accept two-item (x,y) lists as input, and have extended menus
(also including other sprites):

<img src="/snap-manual/assets/images/image286.png" style="width:718px; height:108px">
"Center" means the center of the stage,
the point at (0,0). "Direction" is in the point in direction sense, the
direction that would leave this sprite pointing toward another sprite,
the mouse, or the center. "Ray length" is the distance from the center
of this sprite to the nearest point on the other sprite, in the current
direction.

<img src="/snap-manual/assets/images/image296.png" style="width:247px; height:136px">
The stop block has two extra menu choices. Stop this
block is used inside the definition of a custom block to stop just this
invocation of this custom block and continue the script that called it.
Stop all but this script is good at the end of a game to stop all the
game pieces from moving around, but keep running this script to provide
the user's final score. The last two menu choices add a tab at the
bottom of the block because the current script can continue after it.

<img src="/snap-manual/assets/images/image300.png" style="width:232px; height:102px">
The new "pen trails" option is true if the
sprite is touching any drawn or stamped ink on the stage. Also, touching
will not detect hidden sprites, but a hidden sprite can use it to detect
visible sprites.

<img src="/snap-manual/assets/images/image304.png" style="width:102px; height:27px">
<img src="/snap-manual/assets/images/image305.png" style="width:234px; height:29px">
The video block has a snap option that takes a snapshot
and reports it as a costume. It is hyperized with
<img src="/snap-manual/assets/images/image306.png" style="width:101px; height:27px">
respect to its second input.

<img src="/snap-manual/assets/images/image307.png" style="width:136px; height:320px">
The "neg" option is a monadic negation
operator, equivalent to . "lg" is log~2~. "id" is the identity function,
which reports its input. "sign" reports 1 for positive input, 0 for zero
input, or -1 for negative input.

<img src="/snap-manual/assets/images/image311.png" style="width:315px; height:53px">


<img src="/snap-manual/assets/images/image313.png" style="width:361px; height:117px">


<img src="/snap-manual/assets/images/image325.png" style="width:213px; height:159px">
Extended mouse interaction events, sensing
clicking, dragging, hovering, etc. The "stopped" option triggers when
all scripts are stopped, as with the stop button; it is useful for
robots whose hardware interface must be told to turn off motors. A when
I am stopped script can run only for a limited time.

<img src="/snap-manual/assets/images/image329.png" style="width:276px; height:165px">


Extended broadcast: Click the right arrowhead to direct the message to a
single sprite or the stage. Click again to add any value as a payload to
the message.

<img src="/snap-manual/assets/images/image341.png" style="width:363px; height:174px">
<img src="/snap-manual/assets/images/image351.png" style="width:175px; height:92px">
Extended when I receive: Click the right
arrowhead to expose a script variable (click on it to change its name,
like any script variable) that will be set to the data of a matching
broadcast. If the first input is set to "any message," then the data
variable will be set to the message, if no payload is included with the
broadcast, or to a two-item list containing the message and the payload.

![A picture containing text, clipart Description automatically
generated](image355.png){width="1.68in" height="0.38in"}
 If the input is set to "any key," then a right
arrowhead appears:

<img src="/snap-manual/assets/images/image356.png" style="width:216px; height:40px">
<img src="/snap-manual/assets/images/image357.png" style="width:175px; height:36px">
and if you click it, a script variable
> key is created whose value is the key that was pressed. (If the key is
> one that' represented in the input menu by a word or phrase, e.g.,
> "enter" or "up arrow," then the value of key will be that word or
> phrase, *except for* the space character, which is represented as
> itself in key.)\
<img src="/snap-manual/assets/images/image358.png" style="width:297px; height:66px">


<img src="/snap-manual/assets/images/image362.png" style="width:571px; height:84px">
<img src="/snap-manual/assets/images/image366.png" style="width:535px; height:106px">
<img src="/snap-manual/assets/images/image370.png" style="width:611px; height:279px">


<img src="/snap-manual/assets/images/image376.png" style="width:140px; height:223px">
<img src="/snap-manual/assets/images/image380.png" style="width:564px; height:97px">
These ask features and more in the Menus
library.

The of block has an extended menu of attributes of a sprite. Position
reports an (x,y) vector. Size reports the percentage of normal size, as
controlled by the set size block in the Looks category. Left, right,
etc. report the stage coordinates of the corresponding edge of the
